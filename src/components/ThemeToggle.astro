<button
  id="themeToggle"
  class="p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 hover:text-primary dark:text-gray-400 dark:hover:text-primary transition-all duration-300 hover:scale-110 hover:shadow-md"
  aria-label="Toggle dark mode"
>
  <div class="relative w-6 h-6 overflow-hidden">
    <svg width="24" height="24" class="sun absolute top-0 left-0 transition-transform duration-500 dark:rotate-0 rotate-180 dark:opacity-100 opacity-0">
      <path
        fill="currentColor"
        d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"
      />
    </svg>
    <svg width="24" height="24" class="moon absolute top-0 left-0 transition-transform duration-500 dark:rotate-180 rotate-0 dark:opacity-0 opacity-100">
      <path
        fill="currentColor"
        d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"
      />
    </svg>
  </div>
</button>

<script is:inline>
  const handleToggleClick = () => {
    const element = document.documentElement;
    const button = document.getElementById('themeToggle');

    // Add animation class
    button.classList.add('animate-toggle');

    // Toggle dark mode
    element.classList.toggle('dark');

    // Remove animation class after animation completes
    setTimeout(() => {
      button.classList.remove('animate-toggle');
    }, 500);

    const isDark = element.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  };

  document
    .getElementById('themeToggle')
    .addEventListener('click', handleToggleClick);
</script>

<style>
  @keyframes toggle {
    0% { transform: scale(1); }
    50% { transform: scale(0.8); }
    100% { transform: scale(1); }
  }

  .animate-toggle {
    animation: toggle 0.5s ease-in-out;
  }
</style>